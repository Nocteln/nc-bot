"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.requester = requester;

var _axios = _interopRequireDefault(require("axios"));

var _queryString = _interopRequireDefault(require("query-string"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function requester(token) {
  return async function (route, query) {
    try {
      const request = {
        method: 'get',
        url: `${route}?${query ? _queryString.default.stringify(query) : ''}`,
        baseURL: 'https://api.clashroyale.com/v1/',
        headers: {
          Accept: 'application/json',
          authorization: `Bearer ${token}`
        }
      };
      const response = await (0, _axios.default)(request);
      return response.data;
    } catch (error) {
      throw new Error(error);
    }
  };
}