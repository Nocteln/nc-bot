<!--
=========================================================
* Soft UI Dashboard - v1.0.3
=========================================================

* Product Page: https://www.creative-tim.com/product/soft-ui-dashboard
* Copyright 2021 Creative Tim (https://www.creative-tim.com)
* Licensed under MIT (https://www.creative-tim.com/license)

* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
-->
<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('partials/preloader.ejs', {now: 'admin'}) %>
    <style>
        #backButton {
            display: inline-block;
            background-color: #FF9800;
            width: 50px;
            height: 50px;
            text-align: center;
            border-radius: 4px;
            position: fixed;
            bottom: 30px;
            right: 30px;
            transition: background-color .1s;
            z-index: 1000;
        }

        #backButton::after {
            content: "\f077";
            font-family: FontAwesome;
            font-weight: normal;
            font-style: normal;
            font-size: 2em;
            line-height: 50px;
            color: #fff;
        }

        #backButton:hover {
            cursor: pointer;
            background-color: #333;
        }

        #backButton:active {
            background-color: #555;
        }
    </style>
    <%
    const icons = [
        "address-book",
        "address-card",
        "adjust",
        "air-freshener",
        "align-center",
        "align-left",
        "align-right",
        "ambulance",
        "angle-double-down",
        "angle-double-left",
        "angle-double-right",
        "angle-double-up",
        "angle-down",
        "angle-left",
        "angle-right",
        "angle-up",
        "archive",
        "arrow-alt-circle-down",
        "arrow-alt-circle-left",
        "arrow-alt-circle-right",
        "arrow-alt-circle-up",
        "arrow-down",
        "arrow-left",
        "arrow-right",
        "arrow-up",
        "arrows-alt",
        "arrows-alt-h",
        "arrows-alt-v",
        "assistive-listening-systems",
        "asterisk",
        "at",
        "atlas",
        "award",
        "backspace",
        "backward",
        "bahai",
        "ban",
        "band-aid",
        "bars",
        "battery-empty",
        "battery-full",
        "battery-half",
        "battery-quarter",
        "battery-three-quarters",
        "bed",
        "beer",
        "bell",
        "bell-slash",
        "birthday-cake",
        "bolt",
        "bomb",
        "bone",
        "book",
        "book-dead",
        "book-medical",
        "book-open",
        "bookmark",
        "border-all",
        "border-none",
        "border-style",
        "bowling-ball",
        "box",
        "box-open",
        "briefcase",
        "broadcast-tower",
        "bug",
        "building",
        "bullhorn",
        "calculator",
        "calendar",
        "calendar-alt",
        "calendar-check",
        "calendar-day",
        "calendar-minus",
        "calendar-plus",
        "calendar-times",
        "calendar-week",
        "camera",
        "caret-down",
        "caret-left",
        "caret-right",
        "caret-up",
        "certificate",
        "chair",
        "chalkboard",
        "charging-station",
        "chart-bar",
        "chart-line",
        "chart-pie",
        "check",
        "check-circle",
        "check-square",
        "circle",
        "circle-notch",
        "clipboard",
        "clock",
        "clone",
        "cloud",
        "cloud-download-alt",
        "cloud-meatball",
        "cloud-moon",
        "cloud-moon-rain",
        "cloud-rain",
        "cloud-showers-heavy",
        "cloud-sun",
        "cloud-sun-rain",
        "cloud-upload-alt",
        "code",
        "code-branch",
        "cog",
        "cogs",
        "columns",
        "comment",
        "comment-alt",
        "comment-dollar",
        "comment-dots",
        "comment-medical",
        "comment-slash",
        "comments",
        "comments-dollar",
        "compact-disc",
        "compass",
        "compress-alt",
        "cookie",
        "cookie-bite",
        "copy",
        "credit-card",
        "crop",
        "crop-alt",
        "cut",
        "database",
        "desktop",
        "edit",
        "envelope",
        "envelope-open",
        "eraser",
        "ethernet",
        "exchange-alt",
        "exclamation",
        "exclamation-circle",
        "exclamation-triangle",
        "expand",
        "expand-alt",
        "external-link-alt",
        "eye",
        "eye-dropper",
        "eye-slash",
        "fan",
        "file",
        "file-alt",
        "file-archive",
        "file-audio",
        "file-code",
        "file-download",
        "fill",
        "fill-drip",
        "filter",
        "fingerprint",
        "fire",
        "fire-alt",
        "folder",
        "folder-open",
        "forward",
        "gamepad",
        "ghost",
        "gift",
        "gifts",
        "globe",
        "globe-africa",
        "globe-asia",
        "globe-europe",
        "headphones",
        "headphones-alt",
        "headset",
        "heart",
        "heart-broken",
        "heartbeat",
        "history",
        "home",
        "info",
        "keyboard",
        "layer-group",
        "list",
        "lock",
        "lock-open",
        "map-marker",
        "map-marker-alt",
        "microphone",
        "microphone-alt",
        "microphone-alt-slash",
        "minus",
        "mobile",
        "mobile-alt",
        "moon",
        "mouse",
        "mouse-pointer",
        "music",
        "network-wired",
        "neuter",
        "paperclip",
        "paste",
        "pause",
        "paw",
        "pen",
        "pencil-alt",
        "percent",
        "percentage",
        "phone",
        "phone-alt",
        "phone-slash",
        "phone-volume",
        "photo-video",
        "power-off",
        "question",
        "question-circle",
        "redo",
        "redo-alt",
        "reply",
        "robot",
        "rocket",
        "rss",
        "satellite-dish",
        "save",
        "search",
        "server",
        "shapes",
        "share",
        "share-alt",
        "shield-alt",
        "signal",
        "skull",
        "skull-crossbones",
        "sliders-h",
        "sort",
        "spinner",
        "times",
        "times-circle",
        "toggle-off",
        "toggle-on",
        "toolbox",
        "tools",
        "trash",
        "trash-alt",
        "tv",
        "undo",
        "undo-alt",
        "unlink",
        "unlock",
        "unlock-alt",
        "upload",
        "user",
        "user-alt",
        "volume-down",
        "volume-mute",
        "volume-off",
        "volume-up",
        "wifi",
        "wrench"
    ]
    const otherIcons = [
        "youtube",
        "discord",
        "node",
        "apple",
        "sellsy",
        "app-store",
        "cloudflare",
        "dev",
        "github-alt",
        "gitlab",
        "google",
        "itunes-note",
        "node-js",
        "npm",
        "spotify",
        "usb",
        "windows"
    ]
    %>
    <style>
        .input-group .form-control:focus {
            /* border: none; */
            border-right-color: rgba(0, 0, 0, 0) !important;
            border-left-color: rgba(0, 0, 0, 0) !important;
            border-left-color: rgba(0, 0, 0, 0) !important;
            border-right-color: rgba(0, 0, 0, 0) !important;
        }
    </style>
    <%- themeConfig?.customHtml %>
</head>

<body class="g-sidenav-show  bg-gray-100" id="scroll">
<%- include('partials/preload.ejs') %>
<script>
    const maxUsed = <%- allFeedsUsed %>;
</script>
<%- include('partials/sidebar.ejs', {config: config, now:'admin'}) %>
<div class="main-content position-relative bg-gray-100 max-height-vh-100 h-100">
    <!-- Navbar -->
    <%- include('partials/navbar.ejs', {now:'admin'}) %>
    <!-- End Navbar -->
    <div class="container-fluid py-4" style="padding-bottom: 0px !important;">
        <%
        if(themeConfig.admin.pterodactyl.enabled) { %>
            <div class="row">
                <div class="modal fade" id="modal-notification" tabindex="-1" role="dialog"
                     aria-labelledby="modal-notification" aria-hidden="true">
                    <div class="modal-dialog modal-danger modal-dialog-centered modal-" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h6 class="modal-title" id="modal-title-notification">Your attention is required</h6>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">Ã—</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <div class="py-3 text-center">
                                    <i class="ni ni-bell-55 ni-3x"></i>
                                    <h4 class="text-gradient text-danger mt-4">Warning</h4>
                                    <p>The maximum amount of feeds have been created.</p>
                                    <p>If you publish this feed, the oldest feed will be deleted!</p>
                                </div>
                            </div>
                            <div class="modal-footer"
                                 style="display: flex; justify-content: center; align-items: center;">
                                <button type="button" class="btn btn-danger" id="mfeedSubmit">Publish</button>
                                <button type="button" class="btn btn-light text-black ml-auto" data-bs-dismiss="modal">
                                    Nevermind
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12">
                    <div class="card mb-4">
                        <div class="card-header pb-0">
                            <h6>Pterodactyl List</h6>
                        </div>
                        <div class="card-body px-0 pt-0 pb-2">
                            <div class="table-responsive p-0">
                                <table class="table align-items-center mb-0">
                                    <thead>
                                    <tr>
                                        <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                            Server
                                        </th>
                                        <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">
                                            Info
                                        </th>
                                        <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                            Status
                                        </th>
                                        <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                            Controls
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <%
                                    sData.forEach(data => {
                                    %>
                                        <tr style="border-bottom: rgba(0,0,0,0); border-width: 1.3px 0px 0px 0px;">
                                            <td>
                                                <div class="d-flex px-2 py-1">
                                                    <div>
                                                        <img src="https://www.svgrepo.com/show/35777/server.svg"
                                                             class="avatar avatar-sm me-3 invert-img"
                                                             alt="user1">
                                                    </div>
                                                    <div class="d-flex flex-column justify-content-center">
                                                        <h6 class="mb-0 text-sm"><%- data.name %></h6>
                                                        <p class="text-xs text-secondary mb-0"><%- data.uuid %></p>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <p class="text-xs font-weight-bold mb-0"><%- data.description %></p>
                                                <p class="text-xs text-secondary mb-0"><%- data.node %></p>
                                            </td>
                                            <td class="align-middle text-center text-sm">
                                                <%
                                                if(data.status === "running") { %>
                                                    <span class="badge badge-sm bg-gradient-success">Online</span>
                                                <% } else if(data.status === "starting") { %>
                                                    <span class="badge badge-sm bg-gradient-warning">Starting</span>
                                                <% } else if(data.status === "stopping") { %>
                                                    <span class="badge badge-sm bg-gradient-warning">Stopping</span>
                                                <% } else { %>
                                                    <span class="badge badge-sm bg-gradient-danger">Offline</span>
                                                <% } %>

                                            </td>
                                            <td class="align-middle text-center text-sm">
                                                <%
                                                if(data.status === "running" || data.status === "starting") { %>
                                                    <a href="#"
                                                       onclick="controlServer('<%- data.uuid %>', 'stop');"><span
                                                                class="badge badge-sm bg-gradient-warning">Stop</span></a>
                                                    <a href="#" onclick="controlServer('<%- data.uuid %>', 'restart');"><span
                                                                class="badge badge-sm bg-gradient-info">Restart</span></a>
                                                    <a href="#"
                                                       onclick="controlServer('<%- data.uuid %>', 'kill');"><span
                                                                class="badge badge-sm bg-gradient-danger">Kill</span></a>
                                                <% } else if(data.status === "restarting") { %>
                                                    <a href="#"
                                                       onclick="controlServer('<%- data.uuid %>', 'stop');"><span
                                                                class="badge badge-sm bg-gradient-warning">Stop</span></a>
                                                    <a href="#"
                                                       onclick="controlServer('<%- data.uuid %>', 'kill');"><span
                                                                class="badge badge-sm bg-gradient-danger">Kill</span></a>
                                                <% } else if(data.status === "stopping") { %>
                                                    <a href="#"
                                                       onclick="controlServer('<%- data.uuid %>', 'kill');"><span
                                                                class="badge badge-sm bg-gradient-danger">Kill</span></a>
                                                <% } else { %>
                                                    <a href="#"
                                                       onclick="controlServer('<%- data.uuid %>', 'start');"><span
                                                                class="badge badge-sm bg-gradient-success">Start</span></a>
                                                    </a>
                                                <% } %>
                                            </td>
                                        </tr>
                                    <%
                                    });
                                    %>
                                    <script>
                                        function controlServer(id, action) {
                                            window.location = `../control?action=${action}&uuid=${id}`;
                                        }
                                    </script>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        <% } %>
        <div class="row">
            <div class="col-12 col-xl-6" style="margin-bottom: 20px;">
                <div class="card h-100">
                    <div class="card-header pb-0 p-3">
                        <h6 class="mb-0">Feed Builder</h6>
                    </div>
                    <div class="card-body p-3">
                        <h6 class="text-uppercase text-body text-xs font-weight-bolder">Feed Icon</h6>
                        <ul class="list-group">
                            <li class="list-group-item border-0 px-0">
                                <div class="form-check form-switch ps-0">
                                    <div class="input-group">
                                        <input class="form-control" list="iconList" id="iconSelect">
                                        <span class="btn btn-outline-dark mb-0 feed-builder-icon" type="button"
                                              style="border: 1px solid #d2d6da;">
                        <i id="invalidIcon" class="fas fa-exclamation-triangle"
                           style="color: red; font-size: 120%;"></i>
                        <i id="validIcon" class="fas fa-check"
                           style="color: greenyellow; font-size: 120%; display: none;"></i>
                      </span>
                                    </div>
                                </div>
                            </li>
                        </ul>
                        <h6 class="text-uppercase text-body text-xs font-weight-bolder mt-4">Feed Description</h6>
                        <ul class="list-group">
                            <li class="list-group-item border-0 px-0">
                                <div class="form-check form-switch ps-0">
                                    <div class="input-group">
                                        <input class="form-control" type="text" maxlength="128" id="feedDescription"
                                               placeholder="Feed Description">
                                        <span class="btn btn-outline-dark mb-0 feed-builder-icon" type="button"
                                              style="border: 1px solid #d2d6da;">
                      <i id="invalidDesc" class="fas fa-exclamation-triangle" style="color: red; font-size: 120%;"></i>
                      <i id="validDesc" class="fas fa-check"
                         style="color: greenyellow; font-size: 120%; display: none;"></i>
                    </span>
                                    </div>
                                </div>
                            </li>
                        </ul>
                        <h6 class="text-uppercase text-body text-xs font-weight-bolder mt-4">Feed Colour</h6>
                        <ul class="list-group">
                            <li class="list-group-item border-0 px-0">
                                <div class="form-check form-switch ps-0">
                                    <select class="form-control" id="colorSelect">
                                        <option value="pink">Pink</option>
                                        <option value="red">Red</option>
                                        <option value="orange">Orange</option>
                                        <option value="green">Green</option>
                                        <option value="gray">Gray</option>
                                        <option value="blue">Blue</option>
                                        <option value="dark">Dark</option>
                                    </select>
                                </div>
                            </li>
                        </ul>
                        <br>
                        <button id="feedSubmit" class="btn bg-gradient-primary mb-0" type="button">Submit</button>
                    </div>
                </div>
            </div>
            <div class="col-12 col-xl-6" style="margin-bottom: 20px;">
                <div class="card h-10" style="margin-bottom: 20px;">
                    <div class="card-header pb-0 p-3">
                        <h6 class="mb-0">Feed Preview</h6>
                    </div>
                    <div class="card-body p-3">
                        <div>
                            <div class="alert alert-primary text-white font-weight-bold" role="alert"
                                 style="display: flex; margin-top: 20px;" id="previewFeedColor">
                                <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center gray-icon-bg"
                                     style="margin: auto 0px;">
                                    <i id="previewFeedIcon" class="fas fa-camera invert-img"
                                       style="font-size: 80%; color: black"></i>
                                </div>
                                <span id="previewFeedDescription" class="tagnamecolor"
                                      style="margin: auto 0px; overflow: hidden; text-overflow: ellipsis; color: white !important;">
                  <div id="target"></div>
                </span>
                                <span class="tagnamecolor-date"
                                      style="color:rgb(155, 148, 148); margin: auto 0px; font-size: 75%; flex: 1; text-align: right; white-space: nowrap;">
                  Preview
                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card h-10">
                    <div class="card-header pb-0 p-3">
                        <h6 class="mb-0">Admin Controls</h6>
                        <h7 style="text-align:center;">CHECK FOR UPDATES</h7>
                    </div>
                    <div class="card-body p-3">
                        <div class="row">
                            <div class="col-12"><a disabled href="#"
                                                   onclick="window.location = '../control?action=update&type=live'"
                                                   type="button" class="btn bg-gradient-info btn-lg w-100"><i
                                            class="fas fa-exclamation-circle" style="color: white !important;" ></i> LIVE</a>
                            </div>
                            <div class="col-12"><a href="#"
                                                   onclick="window.location = '../control?action=update&type=npm'"
                                                   type="button" class="btn bg-gradient-danger btn-lg w-100"><i
                                            class="fab fa-npm" style="color: white !important;"></i> NPM</a></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-12 mb-lg-0 mb-4">
            <div class="card z-index-2">
                <div class="card-body p-3">
                    <h6 class="ms-2 mt-3 mb-0" style="margin-top: 0px !important">Current Feeds</h6>
                    <%- include('partials/feeds.ejs', {require, admin:true}) %>
                    <div style="white-space: nowrap; overflow: hidden;">
                        <datalist id="iconList">
                            <%
                            icons.forEach(async(icon) => { %>
                            <option value="<%- icon %>">
                                <% }); %>
                                <%
                                otherIcons.forEach(async(icon) => { %>
                            <option value="<%- icon %>">
                                <% }); %>

                        </datalist>
                        <script>
                            $(document).ready(function () {
                                $('.js-example-basic-single').select2();
                            });
                        </script>
                        <button type="button" class="btn btn-light text-black ml-auto"
                                onclick="$('#bigIconsList').fadeToggle();">Show Icons
                        </button>
                        <%- include('partials/iconsList.ejs', {icons,otherIcons}) %>
                        <a id="backButton" style="display: none;"></a>
                    </div>
                </div>
            </div>
        </div>
        <div style="padding: 17px 0px">
            <%- include('partials/footer.ejs') %>
        </div>
    </div>

</div>
</main>
<script src="https://plaindevelopment.github.io/cdn/dbd-soft-ui/javascript/feed.js"></script>
<script>
    $(window).scroll(async function () {
        if ($(window).scrollTop() > 300) {
            $("#backButton").slideDown();
            $("#themeButton").fadeOut();

        } else {

            $("#backButton").slideUp();

            $("#themeButton").show();
        }
    });

    $("#backButton").on('click', function (e) {
        $('html, body').animate({scrollTop: 0}, '250');
    });

</script>
<%- include('partials/scripts.ejs', {now: "admin"}) %>
</body>

</html>